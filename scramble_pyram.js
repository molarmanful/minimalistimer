"use strict";if("undefined"==typeof scramblers)var scramblers={};scramblers.pyram=function(){function r(){for(var r=0;6>r;r++){d[r+1]=F.length-3;for(var o=0;o<F.length;o+=3)if(b.charAt(r)==F[o]){d[r+1]=o;break}}}function o(r){p[r]=[1,1,1,1,1,0,2,0,3,3,3,3,3,0,1,1,1,0,2,2,2,0,3,3,3,0,0,0,1,0,2,2,2,2,2,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0]}function f(){var r,f,n;for(n=0;h>n;n++){for(a(),e(),M[n]="",o(n),r=0;r<x.length;r++)M[n]+=["U","L","R","B"][7&x[r]]+["","'"][(8&x[r])/8]+" ",u([3,0,1,2][7&x[r]],1+(8&x[r])/8,n);var t=["l","r","b","u"];for(r=0;4>r;r++){var f=Math.floor(3*A.random());2>f&&(M[n]+=t[r]+["","'"][f]+" ",u(4+r,1+f,n))}}}function a(){4==k&&clearTimeout(y),j=[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3],k=0,x.length=0}function e(){var r,o,f,a,e=0,t=0,i=0;z=[0,1,2,3,4,5];for(var c=0;4>c;c++){var u=c+Math.floor((6-c)*A.random()),l=z[c];z[c]=z[u],z[u]=l,c!=u&&i++}if(i%2==1){var l=z[4];z[4]=z[5],z[5]=l}i=0,L=[];for(var c=0;5>c;c++)L[c]=Math.floor(2*A.random()),i+=L[c];L[5]=i%2;for(var c=6;10>c;c++)L[c]=Math.floor(3*A.random());for(r=0;6>r;r++){for(o=0,f=0;6>f&&z[f]!=r;f++)z[f]>r&&o++;t=t*(6-r)+o}for(r=9;r>=6;r--)e=3*e+L[r];for(r=4;r>=0;r--)e=2*e+L[r];if(0!=t||0!=e)for(a=7;12>a&&!n(t,e,a,-1);a++);}function n(r,o,f,a){if(0==f){if(0==r&&0==o)return!0}else{if(w[r]>f||R[o]>f)return!1;var e,t,i,c;for(c=0;4>c;c++)if(c!=a)for(e=r,t=o,i=0;2>i;i++){if(e=S[e][c],t=q[t][c],x[x.length]=c+8*i,n(e,t,f-1,c))return!0;x.length--}}return!1}function t(){var r,o,f,a,e,n;for(o=0;720>o;o++)for(w[o]=-1,S[o]=[],e=0;4>e;e++)S[o][e]=i(o,e);for(w[0]=0,a=0;6>=a;a++)for(n=0,o=0;720>o;o++)if(w[o]==a)for(e=0;4>e;e++)for(f=o,r=0;2>r;r++)f=S[f][e],-1==w[f]&&(w[f]=a+1,n++);for(o=0;2592>o;o++)for(R[o]=-1,q[o]=[],e=0;4>e;e++)q[o][e]=c(o,e);for(R[0]=0,a=0;5>=a;a++)for(n=0,o=0;2592>o;o++)if(R[o]==a)for(e=0;4>e;e++)for(f=o,r=0;2>r;r++)f=q[f][e],-1==R[f]&&(R[f]=a+1,n++)}function i(r,o){var f,a,e,n=[],t=r;for(f=1;6>=f;f++){for(e=Math.floor(t/f),a=t-f*e,t=e,e=f-1;e>=a;e--)n[e+1]=n[e];n[a]=6-f}for(0==o?v(n,0,3,1):1==o?v(n,1,5,2):2==o?v(n,0,2,4):3==o&&v(n,3,4,5),t=0,f=0;6>f;f++){for(a=0,e=0;6>e&&n[e]!=f;e++)n[e]>f&&a++;t=t*(6-f)+a}return t}function c(r,o){var f,a,e,n=0,t=[],i=r;for(f=0;4>=f;f++)t[f]=1&i,i>>=1,n^=t[f];for(t[5]=n,f=6;9>=f;f++)e=Math.floor(i/3),a=i-3*e,i=e,t[f]=a;for(0==o?(t[6]++,3==t[6]&&(t[6]=0),v(t,0,3,1),t[1]^=1,t[3]^=1):1==o?(t[7]++,3==t[7]&&(t[7]=0),v(t,1,5,2),t[2]^=1,t[5]^=1):2==o?(t[8]++,3==t[8]&&(t[8]=0),v(t,0,2,4),t[0]^=1,t[2]^=1):3==o&&(t[9]++,3==t[9]&&(t[9]=0),v(t,3,4,5),t[3]^=1,t[4]^=1),i=0,f=9;f>=6;f--)i=3*i+t[f];for(f=4;f>=0;f--)i=2*i+t[f];return i}function u(r,o,f){switch(r){case 0:l(f,14,58,18,o),l(f,15,57,31,o),l(f,16,70,32,o),l(f,30,28,56,o);break;case 1:l(f,32,72,22,o),l(f,33,59,23,o),l(f,20,58,24,o),l(f,34,60,36,o);break;case 2:l(f,14,10,72,o),l(f,1,11,71,o),l(f,2,24,70,o),l(f,0,12,84,o);break;case 3:l(f,2,18,22,o),l(f,3,19,9,o),l(f,16,20,10,o),l(f,4,6,8,o);break;case 4:l(f,30,28,56,o);break;case 5:l(f,34,60,36,o);break;case 6:l(f,0,12,84,o);break;case 7:l(f,4,6,8,o)}}function l(r,o,f,a,e){2==e?v(p[r],a,f,o):v(p[r],o,f,a)}function v(r,o,f,a){var e=r[o];r[o]=r[f],r[f]=r[a],r[a]=e}function s(r){return"r"==r?"#FF0000":"o"==r?"#FF8000":"b"==r?"#0000FF":"g"==r?"#00FF00":"y"==r?"#FFFF00":"w"==r?"#FFFFFF":"x"==r?"#000000":void 0}function g(r,o,f,a,e,n,t,i,c){var u=1;2==i&&(u=-1);for(var l=[a,a-n,a+n],v=[e+t*u,e-t*u,e-t*u],g="",h=0;h<l.length;h++){var b=E(o,f,[l[h],v[h]]);g+=(0===h?"M":"L")+b[0]+","+b[1]}g+="z",r.path(g).attr({fill:s(c),stroke:"#000"})}var h=1,b="xgryb",F=["g","green.jpg","green","r","red.jpg","red","y","yellow.jpg","yellow","b","blue.jpg","blue","w","white.jpg","white","o","orange.jpg","orange","p","purple.jpg","purple","0","gray.jpg","grey"],m=[1,2,1,2,1,0,2,0,1,2,1,2,1,0,1,2,1,0,2,1,2,0,1,2,1,0,0,0,1,0,2,1,2,1,2,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,1,2,1,0,0,0,0,0,0,0,0,0,1,2,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],p=[],d=[],M=[];r();var k,y,j=[],w=[],R=[],S=[],q=[],x=[],z=[],L=[],T=[];T[0]=[0,18,9,6,24,15,1,19,11,2,20,10],T[1]=[23,3,30,26,7,34,22,1,31,20,4,28],T[2]=[5,14,32,8,17,35,4,11,29,2,13,31],T[3]=[12,21,27,16,25,33,13,19,28,10,22,29];var A=void 0,B=function(r){A=r},D=function(){return f(),{state:p,scramble_string:M[0]}},U=function(o,f){B(f),r(),t(),o&&setTimeout(o,0)},_=15,C=18,E=function(r,o,f){var a=2*_+9*C,e=2*_+5.3*C,n=Math.min(r/a,o/e),t=f[0]*n+(r-a*n)/2,i=f[1]*n+(o-e*n)/2;return[t,i]},G=function(r,o,f,a){for(var e=Raphael(r,f,a),n=0;7>n;n++)for(var t=0;13>t;t++){var i=o[0][13*n+t];if(0!=i){var c=_+C+t*C/2*2/Math.sqrt(3),u=_+n*C;n>3&&(u-=C/2),g(e,f,a,c,u,C/2*2/Math.sqrt(3),C/2,m[13*n+t],b[i])}}};return{version:"December 29, 2011",initialize:U,setRandomSource:B,getRandomScramble:D,drawScramble:G}}();
